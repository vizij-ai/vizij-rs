{
  "spec": {
    "nodes": [
      {
        "id": "profile",
        "type": "input",
        "params": {
          "path": "samples/json.profile",
          "value": {
            "record": {
              "origin": {
                "vec3": [
                  0.0,
                  0.1,
                  0.2
                ]
              },
              "layers": {
                "tuple": [
                  {
                    "record": {
                      "offset": {
                        "vec3": [
                          0.05,
                          0.0,
                          0.0
                        ]
                      },
                      "gain": {
                        "float": 0.2
                      }
                    }
                  },
                  {
                    "record": {
                      "offset": {
                        "vec3": [
                          0.0,
                          0.05,
                          0.05
                        ]
                      },
                      "gain": {
                        "float": 0.4
                      }
                    }
                  },
                  {
                    "record": {
                      "offset": {
                        "vec3": [
                          0.0,
                          0.0,
                          0.1
                        ]
                      },
                      "gain": {
                        "float": 0.6
                      }
                    }
                  }
                ]
              },
              "mask": {
                "array": [
                  {
                    "float": 0.5
                  },
                  {
                    "float": 0.75
                  },
                  {
                    "float": 1.0
                  }
                ]
              },
              "channels": {
                "record": {
                  "primary": {
                    "text": "left"
                  },
                  "secondary": {
                    "text": "foot"
                  }
                }
              }
            }
          }
        }
      },
      {
        "id": "weight0",
        "type": "multiply",
        "inputs": {
          "a": {
            "node_id": "profile",
            "selector": [
              {
                "field": "layers"
              },
              {
                "index": 0
              },
              {
                "field": "gain"
              }
            ]
          },
          "b": {
            "node_id": "profile",
            "selector": [
              {
                "field": "mask"
              },
              {
                "index": 0
              }
            ]
          }
        }
      },
      {
        "id": "weight1",
        "type": "multiply",
        "inputs": {
          "a": {
            "node_id": "profile",
            "selector": [
              {
                "field": "layers"
              },
              {
                "index": 1
              },
              {
                "field": "gain"
              }
            ]
          },
          "b": {
            "node_id": "profile",
            "selector": [
              {
                "field": "mask"
              },
              {
                "index": 1
              }
            ]
          }
        }
      },
      {
        "id": "weight2",
        "type": "multiply",
        "inputs": {
          "a": {
            "node_id": "profile",
            "selector": [
              {
                "field": "layers"
              },
              {
                "index": 2
              },
              {
                "field": "gain"
              }
            ]
          },
          "b": {
            "node_id": "profile",
            "selector": [
              {
                "field": "mask"
              },
              {
                "index": 2
              }
            ]
          }
        }
      },
      {
        "id": "contrib0",
        "type": "vectorscale",
        "inputs": {
          "v": {
            "node_id": "profile",
            "selector": [
              {
                "field": "layers"
              },
              {
                "index": 0
              },
              {
                "field": "offset"
              }
            ]
          },
          "scalar": {
            "node_id": "weight0"
          }
        }
      },
      {
        "id": "contrib1",
        "type": "vectorscale",
        "inputs": {
          "v": {
            "node_id": "profile",
            "selector": [
              {
                "field": "layers"
              },
              {
                "index": 1
              },
              {
                "field": "offset"
              }
            ]
          },
          "scalar": {
            "node_id": "weight1"
          }
        }
      },
      {
        "id": "contrib2",
        "type": "vectorscale",
        "inputs": {
          "v": {
            "node_id": "profile",
            "selector": [
              {
                "field": "layers"
              },
              {
                "index": 2
              },
              {
                "field": "offset"
              }
            ]
          },
          "scalar": {
            "node_id": "weight2"
          }
        }
      },
      {
        "id": "sum01",
        "type": "vectoradd",
        "inputs": {
          "a": {
            "node_id": "contrib0"
          },
          "b": {
            "node_id": "contrib1"
          }
        }
      },
      {
        "id": "sum012",
        "type": "vectoradd",
        "inputs": {
          "a": {
            "node_id": "sum01"
          },
          "b": {
            "node_id": "contrib2"
          }
        }
      },
      {
        "id": "pose",
        "type": "vectoradd",
        "inputs": {
          "a": {
            "node_id": "sum012"
          },
          "b": {
            "node_id": "profile",
            "selector": [
              {
                "field": "origin"
              }
            ]
          }
        }
      },
      {
        "id": "weights_join",
        "type": "join",
        "inputs": {
          "first": {
            "node_id": "weight0"
          },
          "second": {
            "node_id": "weight1"
          },
          "third": {
            "node_id": "weight2"
          }
        }
      },
      {
        "id": "out_pose",
        "type": "output",
        "params": {
          "path": "samples/json.pose"
        },
        "inputs": {
          "in": {
            "node_id": "pose"
          }
        }
      },
      {
        "id": "out_weights",
        "type": "output",
        "params": {
          "path": "samples/json.weights"
        },
        "inputs": {
          "in": {
            "node_id": "weights_join"
          }
        }
      },
      {
        "id": "out_channels",
        "type": "output",
        "params": {
          "path": "samples/json.channels"
        },
        "inputs": {
          "in": {
            "node_id": "profile",
            "selector": [
              {
                "field": "channels"
              }
            ]
          }
        }
      }
    ]
  },
  "subs": {
    "inputs": [],
    "outputs": [
      "samples/json.pose",
      "samples/json.weights",
      "samples/json.channels"
    ]
  }
}
